summon falling_block ~ ~1 ~ {Time:1,BlockState:{Name:redstone_block},Passengers:[{id:armor_stand,Health:0,Passengers:[{id:falling_block,Time:1,BlockState:{Name:activator_rail},Passengers:[{id:command_block_minecart,Command:'data modify storage event:test_npc scene1 set value [\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] rotated ~ 0 run setblock ^ ^ ^1 acacia_button[face=floor]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"ありがとよ","color":"#faf8de"}]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"石のボタンを持ってきたのか","color":"#faf8de"}]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"おお","color":"#faf8de"}]\']'},{id:command_block_minecart,Command:'data modify storage event:test_npc scene2 set value [\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] rotated ~ 0 run setblock ^ ^ ^1 acacia_button[face=floor]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"ほしいのは石のボタンなんだよなぁ...","color":"#faf8de"}]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"オークのボタンを持ってるけど","color":"#faf8de"}]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"おまえ..","color":"#faf8de"}]\']'},{id:command_block_minecart,Command:'data modify storage event:test_npc scene3 set value [\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] rotated ~ 0 run setblock ^ ^ ^1 acacia_button[face=floor]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"アカシアのボタンじゃないんすよ","color":"#faf8de"}]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"あー","color":"#faf8de"}]\']'},{id:command_block_minecart,Command:'data modify storage event:test_npc scene4 set value [\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] rotated ~ 0 run setblock ^ ^ ^1 acacia_button[face=floor]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"暇なら、石のボタンを持ってきてくれないか？","color":"#faf8de"}]\',\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run tellraw @a[distance=..10] ["", {"text":"<","color":"#ede353"}, {"text":" ムキムキのお兄さん "}, {"text":">  ","color":"#ede353"} ,{"text":"ねえ君","color":"#faf8de"}]\']'},{id:command_block_minecart,Command:'setblock ~1 ~2 ~0 red_stained_glass'},{id:command_block_minecart,Command:'setblock ~0 ~2 ~0 command_block[facing=up]{Command:"setblock ~1 ~ ~ red_stained_glass",TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~0 ~3 ~0 chain_command_block[facing=up]{Command:\'data modify storage event:test_npc tmp set value [{"if":\\\'help\\\',"then":\\\'data modify storage event:test_npc tmp set from storage event:test_npc scene4\\\'},{"if":\\\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run clear @p acacia_button 0\\\',"then":\\\'data modify storage event:test_npc tmp set from storage event:test_npc scene3\\\'},{"if":\\\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run clear @p oak_button 0\\\',"then":\\\'data modify storage event:test_npc tmp set from storage event:test_npc scene2\\\'},{"if":\\\'execute at @e[type=villager, name="[ムキムキのお兄さん]", distance=0.., limit=1] run clear @p stone_button 0\\\',"then":\\\'data modify storage event:test_npc tmp set from storage event:test_npc scene1\\\'}]\',auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~0 ~4 ~0 chain_command_block[facing=east]{Command:"setblock ~2 ~-2 ~ redstone_block",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~1 ~4 ~0 chain_command_block[facing=east]{Command:"fill ~1 ~-1 ~ ~1 ~2 ~ air",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~2 ~2 ~0 red_stained_glass'},{id:command_block_minecart,Command:'setblock ~3 ~2 ~0 command_block[facing=east]{Command:"setblock ~-1 ~ ~ air",TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~4 ~2 ~0 chain_command_block[facing=east]{Command:"data modify block ~3 ~ ~ Command set from storage event:test_npc tmp[-1].if",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~5 ~2 ~0 chain_command_block[facing=east]{Command:"data modify block ~4 ~1 ~ Command set from storage event:test_npc tmp[-1].then",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~6 ~2 ~0 chain_command_block[facing=east]{Command:"data remove storage event:test_npc tmp[-1]",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~7 ~2 ~0 chain_command_block[facing=east]{auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~8 ~2 ~0 chain_command_block[conditional=true,facing=east]{Command:"setblock ~1 ~ ~ chain_command_block[facing=up]",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~9 ~2 ~0 chain_command_block[facing=east]{Command:"setblock ~ ~ ~ chain_command_block[facing=east]",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~10 ~2 ~0 chain_command_block[facing=east]{Command:"setblock ~-8 ~ ~ redstone_block",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~11 ~2 ~0 chain_command_block[facing=east]{Command:"say noo",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~9 ~3 ~0 chain_command_block[facing=west]{auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~8 ~3 ~0 chain_command_block[facing=west]{Command:"setblock ~-6 ~ ~ redstone_block",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~7 ~3 ~0 chain_command_block[facing=west]{Command:"setblock ~-5 ~-1 ~ red_stained_glass",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~3 ~3 ~0 comparator[facing=west]'},{id:command_block_minecart,Command:'setblock ~4 ~3 ~0 iron_block'},{id:command_block_minecart,Command:'setblock ~5 ~3 ~0 iron_block'},{id:command_block_minecart,Command:'setblock ~4 ~4 ~0 redstone_wire[east=side,west=side]'},{id:command_block_minecart,Command:'setblock ~5 ~4 ~0 redstone_wire[east=side,west=side]'},{id:command_block_minecart,Command:'setblock ~6 ~3 ~0 command_block[facing=up]{Command:"fill ~-4 ~2 ~ ~-4 ~ ~ air",TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~6 ~4 ~0 chain_command_block[facing=east]{Command:"data modify block ~4 ~-1 ~ Command set from storage event:test_npc tmp[-1]",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~7 ~4 ~0 chain_command_block[facing=east]{Command:"data remove storage event:test_npc tmp[-1]",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~8 ~4 ~0 chain_command_block[conditional=true,facing=east]{Command:"setblock ~2 ~ ~ redstone_block",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~10 ~4 ~0 red_stained_glass'},{id:command_block_minecart,Command:'setblock ~10 ~3 ~0 command_block[facing=east]{TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~11 ~3 ~0 chain_command_block[facing=east]{Command:"setblock ~-1 ~1 ~ red_stained_glass",auto:1b,TrackOutput:0b}'},{id:command_block_minecart,Command:'setblock ~11 ~4 ~0 structure_block[mode=load]{integrity:1.0f,mode:"LOAD",name:"event:timer",posX:-9,posY:-1,posZ:0,showboundingbox:0b,sizeX:2,sizeY:3,sizeZ:1}'},{id:command_block_minecart,Command:'setblock ~ ~1 ~ command_block{auto:1,Command:"fill ~ ~ ~ ~ ~-2 ~ air"}'},{id:command_block_minecart,Command:'kill @e[type=command_block_minecart,distance=..1]'}]}]}]}